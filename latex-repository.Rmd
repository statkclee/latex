---
layout: page
title: "LaTeX 과 PDF "
subtitle: "LaTeX 팩키지 저장소"
author:
- name: "이광춘"
  affiliation: "[Tidyverse Korea](https://www.facebook.com/groups/tidyverse/)"
date: "`r Sys.Date()`"
tags: ["데이터 과학", "Data Science", "데이터 사이언스", "한글", "PDF", "LaTeX", "팩키지", "사설 저장소", "저장소", "Repository"]
output:
  html_document: 
    include:
      after_body: footer.html
      before_body: header.html
    theme: default
    toc: yes
    toc_depth: 2
    toc_float: true
    highlight: tango
    code_folding: show
    number_section: true
    self_contained: true
bibliography: bibliography_latex.bib
csl: biomed-central.csl
mainfont: NanumGothic
urlcolor: blue
linkcolor: blue
editor_options: 
  chunk_output_type: console
  markdown: 
    wrap: sentence
header-includes:
   - \usepackage{gensymb}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE,
                      comment="", digits = 3, tidy = FALSE, prompt = FALSE, fig.align = 'center')
```

```{=html}
<style>
div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 10px;}
</style>
```
![](fig/tex-live-package-manager.png)

# `tex live` 팩키지관리자 [^1] {#tex-live-package-manager}

[^1]: 윤석천, 이주호 (2017), "텍라이브 매니저와 KTUG 사설 저장소", TeX: 조판, 그 이상의 가능성

$\TeX$ 엔진을 보좌하는 다양한 팩키지가 존재한다.
$\LaTeX$ 저작을 할 때 당연히 기본 $\LaTeX$ 기능외에도 제3자가 개발한 팩키지를 활용하여 $\LaTeX$ 저작물을 더욱 읽기 쉽고 가독성 높게 작성할 수 있다.

$\LaTeX$에서 많이 사용되는 팩키지 관리자는 $\TeX$ 라이브 매니저 즉, `tlmgr` 이다.
텍라이브 팩키지 관리자는 운영체제와 독립적으로 이용되며 팩키지와 폰트 꾸러미를 설치 삭제하는데 큰 도움을 준다.
리눅스 `package manager` 나 R `CRAN` 혹은 파이썬 `PIP` 혹은 GitHub 저장소를 통해 동일한 개념을 활용하여 생태계 각각을 풍성하게 하고 영향력을 높여나가고 있다.

한글 폰트 설치 사례를 들어, 과거 폰트꾸러미를 설치하는 것과 팩키지 관리자 사용하는 것을 비교해보자.

+------------------------------------------+------------------------------+
| 고수의 영역                              | 팩키지 관리자: `tlmgr`       |
+==========================================+==============================+
| 1.  폰트 꾸러미 설치                     | 1.  `tlmgr install nanumttf` |
| 2.  `updmap.cfg` 에 해당 `map` 파일 기록 |                              |
| 3.  `udpmap-sys` 실행                    |                              |
+------------------------------------------+------------------------------+

# `tlmgr` 팩키지 관리자 {#tlmgr-pkg-mgr}

`tlmgr info geometry` 명령어를 통해서 이미 설치된 $\LaTeX$ `geometry` 팩키지에 대한 정보를 확인할 수 있다.

```{bash tlmgr-pkg-mgr}
tlmgr info geometry
```

이외에도 `tlmgr` 다양한 명령어를 통해 다양한 팩키지 관련 작업을 수행할 수 있다. 
자세한 내용은 [Basic Usage of tlmgr, the TEX Live Manager](http://tug.ctan.org/info/tlmgrbasics/doc/tlmgr.pdf) 을 참조한다.
기본 사용법은 쉘에서 다음 방식을 사용한다. 즉, 팩키지에 대한 정보를 확인하고 팩키지를 검색하고 팩키지를 설치하고 시간이 지나 최신 팩키지를 갱신하고 팩키지를 삭제하는 작업 등이 포함된다.

`tlmgr [global options ] action [action-specific options] [operands]`

- `info`
- `search`
- `install`
- `update`
- `remove`
- `option`
- `path`


```{r embed-tlmgr-pdf, out.height = "460px", out.width='800px', echo=TRUE}
knitr::include_graphics("data/tlmgr.pdf")
```

# 한글 사설 저장소 {#tlmgr-pkg-repository}

`tex live`를 설치하게 되면 기본 주 저장소로 <http://mirror.ctan.org/systems/texlive/tlnet> 이 설정된다. 하지만 모든 팩키지가 기본 저장소에 등록된 것이 아니라서 한글의 경우 사설 저장소를 등록해서 필요한 팩키지를 설치해야 저작물 작성에 활용할 수 있다.

```{r check-repository, eval = FALSE}
$ tlmgr repository list
List of repositories (with tags if set):
        http://mirror.ctan.org/systems/texlive/tlnet (main)
```

한글 lipsum 을 위해서 [lipsum 팩키지 설치](https://statkclee.github.io/latex/latex-lipsum.html#3_%ED%95%9C%EA%B8%80_lipsum)를 해야 되는 경우가 대표적인 사례다.

`jiwonlipsum` 팩키지는 [KTUG Private Repository](http://wiki.ktug.org/wiki/wiki.php/KtugPrivateRepository)에 저장되어 있어 이를 설치한 후 한글 lipsum을 사용할 수 있다. `jiwonlipsum` 팩키지를 저장된 [KTUG Private Repository](http://wiki.ktug.org/wiki/wiki.php/KtugPrivateRepository) 저장소 안내글을 참고하여 설치한다. 사설 저장소를 등록시키고 사설 저장소에 등록된 팩키지를 사용하는 작업흐름은 대략 다음과 같다.

1. 사설 저장소를 등록한다.
    - `$ <sudo> tlmgr repository add http://ftp.ktug.org/KTUG/texlive/tlnet/ ktug`
1. 사설 저장소 등록이 완료되면 `tex live` 팩키지 관리자가 신규 저장소를 파악해야 되는데 이 과정을 `pinning`이라고 한다. 
    - `$ <sudo> tlmgr pinning add ktug "*"`
1. 사설 저장소에 등록된 예를 들어 `jiwonlipsum` 등 필요한 팩키지를 설치한다.    
    - `$ <sudo> tlmgr install jiwonlipsum`
1. 시간이 오래 지난 후에, 저장소 등록 팩키지 업데이트 명령어는 다음과 같다.
    - `$ <sudo> tlmgr update --all --self`

```{bash add-private-repo}
tlmgr repository list
```


# 팩키지 꿀팁 {#package-tip}

`tex live`를 용량이나 네트워크 등 다양한 이유로 인해서 전체 설치하지 않고 일부만 설치할 경우 특정 팩키지가 빠져 컴파일 과정에서 오류가 발생되는 경우가 종종 발생된다. 이런 문제는 다음과 같은 방식으로 문제를 해결한다.

`xy.sty` 파일이 정상적으로 설치된 경우 다음과 같이 확인되지만 없는 경우 `package xy not present in repoistory`와 같은 오류가 발생된다.

```{bash search-xy-sty}
tlmgr search --global --file xy.sty
```

이를 고치는 방식은 `xypic` 팩키지에 `xy.sty` 파일이 있는 것이 확인되기 때문에 `xypic` 팩키지를 설치한다.

```{bash install-xypic, eval = FALSE}
tlmgr install xypic
```

`kpsewhich xy.sty` 명령어로 설치된 위치를 확인할 수 있다.

```{bash check-xypic-location}
kpsewhich xy.sty
```

